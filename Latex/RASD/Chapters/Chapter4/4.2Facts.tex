\section{Facts}
This section shows the piece of code in Alloy that contains facts.
Some of the facts model the domain assumptions, others are needed to build a consistent model.
\begin{lstlisting} %[language=alloy, basicstyle=\small]
//............
//Unique Istances
fact uniqueQRCode {
   all disj c, c': QRCode | c.id != c'.id
}
fact uniqueBooking {
   all disj b, b': Booking | b.id != b'.id
}
fact uniqueTicket {
   all disj t, t': Ticket | t.number != t'.number
}
fact uniqueCustomer {
   all disj a, a': Customer | a.id != a'.id
}

//Only not-Tech User can have a ticket
fact ticketForNoTech {
   all t: TicketEntrance | t.customer.hasDevice = False
}
fact RequestForTechCustomer {
   all q: Request | q.custumer.hasDevice = True
}

//A QRCode, Booking, Ticket has to be associated to its Request
fact allQRCodeInLineUPRequest  {
   all q: QRCode | one l: LineUpRequest | q.id = l.qrCode.id
}
fact allBookingInBookingRequest {
   all b: Booking | one r: BookingRequest | b.id = r.booking.id
}
fact allTicketInEntrance {
   all t: Ticket | one e: TicketEntrance | t.number = e.ticket.number
}
fact requestCreationStateChart {
   //A request is always created as "Reserved"
   all r: Request | one t': Time | r.state.t' = Reserved	
}
fact requestFinishedStateChart {
   //Once a Request is finished it cannot change status again
   all r: Request, t: Time |
     (r.state.t = Finished => all t': Time | gte[t',t] => r.state.t' = Finished)	
}
fact requestStartedStateChart {
   //Once a Request is started it cannot get back to Reserved
   all r: Request, t: Time |
      (r.state.t = Started => all t': Time | gte[t',t] => r.state.t' != Reserved)	
}
//A user can be envolved in one "Started" request per time
fact oneStartedPerUser {
   no disj r,r': Request |
      r.custumer = r'.custumer and
         some t: Time |
	      r.state.t = Started and r'.state.t = Started
}
\end{lstlisting}








 
 